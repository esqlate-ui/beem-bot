{% extends "base.html" %}
{% block title %}‚Äî –î–∞—à–±–æ—Ä–¥{% endblock %}
{% block content %}
<div class="page-header">
  <h2>üìä –î–∞—à–±–æ—Ä–¥</h2>
  <p>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Beem</p>
</div>

<div class="stat-grid">
  <div class="stat-card orange">
    <div class="stat-icon">üë•</div>
    <div class="stat-num" id="s-users">{{ users_count }}</div>
    <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
  </div>
  <div class="stat-card blue">
    <div class="stat-icon">üí¨</div>
    <div class="stat-num" id="s-chats">{{ chats_count }}</div>
    <div class="stat-label">–ß–∞—Ç–æ–≤</div>
  </div>
  <div class="stat-card green">
    <div class="stat-icon">üìã</div>
    <div class="stat-num" id="s-profiles">{{ profiles_count }}</div>
    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∞–Ω–∫–µ—Ç</div>
  </div>
  <div class="stat-card purple">
    <div class="stat-icon">‚úâÔ∏è</div>
    <div class="stat-num" id="s-messages">{{ messages_count }}</div>
    <div class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π</div>
  </div>
  <div class="stat-card red">
    <div class="stat-icon">‚ö†Ô∏è</div>
    <div class="stat-num" id="s-reports">{{ reports_count }}</div>
    <div class="stat-label">–ù–æ–≤—ã—Ö –∂–∞–ª–æ–±</div>
  </div>
</div>

<div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
  <div class="card">
    <div class="card-header"><h3>üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h3></div>
    <div class="card-body" style="display:flex;flex-direction:column;gap:10px;">
      <a href="/users" class="btn btn-ghost">üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
      <a href="/profiles" class="btn btn-ghost">üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã</a>
      <a href="/chats" class="btn btn-ghost">üí¨ –í—Å–µ —á–∞—Ç—ã</a>
      <a href="/reports" class="btn btn-ghost">‚ö†Ô∏è –ñ–∞–ª–æ–±—ã</a>
    </div>
  </div>
  <div class="card">
    <div class="card-header"><h3>‚ÑπÔ∏è –û —Å–∏—Å—Ç–µ–º–µ</h3></div>
    <div class="card-body text-muted" style="line-height:2;">
      <div>üêù Beem ‚Äî –∞–Ω–æ–Ω–∏–º–Ω—ã–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞</div>
      <div>‚ö° –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫</div>
      <div>üîí –¢–æ–ª—å–∫–æ —Ç—ã –≤–∏–¥–∏—à—å —ç—Ç—É –ø–∞–Ω–µ–ª—å</div>
      <div>üì± –¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ /admin –≤ –±–æ—Ç–µ</div>
    </div>
  </div>
</div>

<script>
setInterval(async()=>{
  const d=await(await fetch('/api/stats')).json();
  document.getElementById('s-users').textContent=d.users;
  document.getElementById('s-chats').textContent=d.chats;
  document.getElementById('s-profiles').textContent=d.profiles;
  document.getElementById('s-messages').textContent=d.messages;
  document.getElementById('s-reports').textContent=d.reports;
},30000);
</script>
{% endblock %}
