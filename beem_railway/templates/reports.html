{% extends "base.html" %}
{% block title %}‚Äî –ñ–∞–ª–æ–±—ã{% endblock %}
{% block content %}
<div class="page-header"><h2>‚ö†Ô∏è –ñ–∞–ª–æ–±—ã</h2><p>{{ reports|length }} –≤—Å–µ–≥–æ</p></div>

<div class="card">
  <div class="table-wrap"><table>
    <thead><tr><th>#</th><th>–ù–∞ –∫–æ–≥–æ</th><th>–ü—Ä–∏—á–∏–Ω–∞</th><th>–ß–∞—Ç</th><th>–°—Ç–∞—Ç—É—Å</th><th>–í—Ä–µ–º—è</th><th></th></tr></thead>
    <tbody>
    {% for r in reports %}
    <tr>
      <td class="text-muted">#{{ r.id }}</td>
      <td><a href="/user/{{ r.reported_id }}" style="color:var(--text);text-decoration:none;font-weight:600;">
        {{ r.reported_name or r.reported_id }}
        {% if r.reported_username %}<span class="text-muted">@{{ r.reported_username }}</span>{% endif %}
      </a></td>
      <td>
        {% if r.reason == 'nsfw' %}üîû –ù–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
        {% elif r.reason == 'spam' %}üí¨ –°–ø–∞–º
        {% elif r.reason == 'abuse' %}üò° –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è
        {% elif r.reason == 'scam' %}ü§ñ –ë–æ—Ç/—Å–∫–∞–º
        {% else %}{{ r.reason or '‚Äî' }}{% endif %}
      </td>
      <td><a href="/chat/{{ r.chat_id }}" class="btn btn-ghost btn-sm">#{{ r.chat_id }}</a></td>
      <td>
        {% if r.status == 'new' %}<span class="badge badge-new">üÜï –ù–æ–≤–∞—è</span>
        {% else %}<span class="badge badge-resolved">‚úÖ –ó–∞–∫—Ä—ã—Ç–∞</span>{% endif %}
      </td>
      <td class="text-muted">{{ r.created_display }}</td>
      <td style="display:flex;gap:8px;">
        <a href="/user/{{ r.reported_id }}" class="btn btn-danger btn-sm">üîí –ë–∞–Ω</a>
        {% if r.status == 'new' %}
        <form method="POST" action="/report/{{ r.id }}/resolve" style="display:inline;">
          <button class="btn btn-success btn-sm" type="submit">‚úÖ</button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% else %}
    <tr><td colspan="7" style="text-align:center;padding:40px;color:var(--muted);">‚úÖ –ñ–∞–ª–æ–± –Ω–µ—Ç!</td></tr>
    {% endfor %}
    </tbody>
  </table></div>
</div>
{% endblock %}
